
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Mixins Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="Triple-Slash Directives.html" />
    
    
    <link rel="prev" href="Decorators.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="Basic Types.html">
            
                <a href="Basic Types.html">
            
                    
                    Basic Types
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="Variable Declarations.html">
            
                <a href="Variable Declarations.html">
            
                    
                    Variable Declarations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="Interfaces.html">
            
                <a href="Interfaces.html">
            
                    
                    Interfaces
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="Classes.html">
            
                <a href="Classes.html">
            
                    
                    Classes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="Functions.html">
            
                <a href="Functions.html">
            
                    
                    Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="Generics.html">
            
                <a href="Generics.html">
            
                    
                    Generics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="Enums.html">
            
                <a href="Enums.html">
            
                    
                    Enums
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="Type Inference.html">
            
                <a href="Type Inference.html">
            
                    
                    Type Inference
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="Type Compatibility.html">
            
                <a href="Type Compatibility.html">
            
                    
                    Type Compatibility
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="Advanced Types.html">
            
                <a href="Advanced Types.html">
            
                    
                    Advanced Types
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="Symbols.html">
            
                <a href="Symbols.html">
            
                    
                    Symbols
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="Iterators and Generators.html">
            
                <a href="Iterators and Generators.html">
            
                    
                    Iterators and Generators
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="Modules.html">
            
                <a href="Modules.html">
            
                    
                    Modules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="Namespaces.html">
            
                <a href="Namespaces.html">
            
                    
                    Namespaces
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="Namespaces and Modules.html">
            
                <a href="Namespaces and Modules.html">
            
                    
                    Namespaces and Modules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="Module Resolution.html">
            
                <a href="Module Resolution.html">
            
                    
                    Module Resolution
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="Declaration Merging.html">
            
                <a href="Declaration Merging.html">
            
                    
                    Declaration Merging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="JSX.html">
            
                <a href="JSX.html">
            
                    
                    JSX
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20" data-path="Decorators.html">
            
                <a href="Decorators.html">
            
                    
                    Decorators
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.21" data-path="Mixins.html">
            
                <a href="Mixins.html">
            
                    
                    Mixins
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.22" data-path="Triple-Slash Directives.html">
            
                <a href="Triple-Slash Directives.html">
            
                    
                    Triple-Slash Directives
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23" data-path="Type Checking JavaScript Files.html">
            
                <a href="Type Checking JavaScript Files.html">
            
                    
                    Type Checking JavaScript Files
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Mixins</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="introduction">Introduction</h1>
<p>Along with traditional OO hierarchies, another popular way of building up classes from reusable components is to build them by combining simpler partial classes.
You may be familiar with the idea of mixins or traits for languages like Scala, and the pattern has also reached some popularity in the JavaScript community.</p>
<h1 id="mixin-sample">Mixin sample</h1>
<p>In the code below, we show how you can model mixins in TypeScript.
After the code, we&apos;ll break down how it works.</p>
<pre><code class="lang-ts"><span class="hljs-comment">// Disposable Mixin</span>
<span class="hljs-keyword">class</span> Disposable {
    isDisposed: <span class="hljs-built_in">boolean</span>;
    dispose() {
        <span class="hljs-keyword">this</span>.isDisposed = <span class="hljs-literal">true</span>;
    }

}

<span class="hljs-comment">// Activatable Mixin</span>
<span class="hljs-keyword">class</span> Activatable {
    isActive: <span class="hljs-built_in">boolean</span>;
    activate() {
        <span class="hljs-keyword">this</span>.isActive = <span class="hljs-literal">true</span>;
    }
    deactivate() {
        <span class="hljs-keyword">this</span>.isActive = <span class="hljs-literal">false</span>;
    }
}

<span class="hljs-keyword">class</span> SmartObject <span class="hljs-keyword">implements</span> Disposable, Activatable {
    <span class="hljs-keyword">constructor</span>() {
        setInterval(() =&gt; <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.isActive + <span class="hljs-string">&quot; : &quot;</span> + <span class="hljs-keyword">this</span>.isDisposed), <span class="hljs-number">500</span>);
    }

    interact() {
        <span class="hljs-keyword">this</span>.activate();
    }

    <span class="hljs-comment">// Disposable</span>
    isDisposed: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;
    dispose: () =&gt; <span class="hljs-built_in">void</span>;
    <span class="hljs-comment">// Activatable</span>
    isActive: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;
    activate: () =&gt; <span class="hljs-built_in">void</span>;
    deactivate: () =&gt; <span class="hljs-built_in">void</span>;
}
applyMixins(SmartObject, [Disposable, Activatable]);

<span class="hljs-keyword">let</span> smartObj = <span class="hljs-keyword">new</span> SmartObject();
setTimeout(() =&gt; smartObj.interact(), <span class="hljs-number">1000</span>);

<span class="hljs-comment">////////////////////////////////////////</span>
<span class="hljs-comment">// In your runtime library somewhere</span>
<span class="hljs-comment">////////////////////////////////////////</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">applyMixins</span>(<span class="hljs-params">derivedCtor: <span class="hljs-built_in">any</span>, baseCtors: <span class="hljs-built_in">any</span>[]</span>) </span>{
    baseCtors.forEach(baseCtor =&gt; {
        <span class="hljs-built_in">Object</span>.getOwnPropertyNames(baseCtor.prototype).forEach(name =&gt; {
            derivedCtor.prototype[name] = baseCtor.prototype[name];
        });
    });
}
</code></pre>
<h1 id="understanding-the-sample">Understanding the sample</h1>
<p>The code sample starts with the two classes that will act as our mixins.
You can see each one is focused on a particular activity or capability.
We&apos;ll later mix these together to form a new class from both capabilities.</p>
<pre><code class="lang-ts"><span class="hljs-comment">// Disposable Mixin</span>
<span class="hljs-keyword">class</span> Disposable {
    isDisposed: <span class="hljs-built_in">boolean</span>;
    dispose() {
        <span class="hljs-keyword">this</span>.isDisposed = <span class="hljs-literal">true</span>;
    }

}

<span class="hljs-comment">// Activatable Mixin</span>
<span class="hljs-keyword">class</span> Activatable {
    isActive: <span class="hljs-built_in">boolean</span>;
    activate() {
        <span class="hljs-keyword">this</span>.isActive = <span class="hljs-literal">true</span>;
    }
    deactivate() {
        <span class="hljs-keyword">this</span>.isActive = <span class="hljs-literal">false</span>;
    }
}
</code></pre>
<p>Next, we&apos;ll create the class that will handle the combination of the two mixins.
Let&apos;s look at this in more detail to see how it does this:</p>
<pre><code class="lang-ts"><span class="hljs-keyword">class</span> SmartObject <span class="hljs-keyword">implements</span> Disposable, Activatable {
</code></pre>
<p>The first thing you may notice in the above is that instead of using <code>extends</code>, we use <code>implements</code>.
This treats the classes as interfaces, and only uses the types behind Disposable and Activatable rather than the implementation.
This means that we&apos;ll have to provide the implementation in class.
Except, that&apos;s exactly what we want to avoid by using mixins.</p>
<p>To satisfy this requirement, we create stand-in properties and their types for the members that will come from our mixins.
This satisfies the compiler that these members will be available at runtime.
This lets us still get the benefit of the mixins, albeit with some bookkeeping overhead.</p>
<pre><code class="lang-ts"><span class="hljs-comment">// Disposable</span>
isDisposed: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;
dispose: () =&gt; <span class="hljs-built_in">void</span>;
<span class="hljs-comment">// Activatable</span>
isActive: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;
activate: () =&gt; <span class="hljs-built_in">void</span>;
deactivate: () =&gt; <span class="hljs-built_in">void</span>;
</code></pre>
<p>Finally, we mix our mixins into the class, creating the full implementation.</p>
<pre><code class="lang-ts">applyMixins(SmartObject, [Disposable, Activatable]);
</code></pre>
<p>Lastly, we create a helper function that will do the mixing for us.
This will run through the properties of each of the mixins and copy them over to the target of the mixins, filling out the stand-in properties with their implementations.</p>
<pre><code class="lang-ts"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">applyMixins</span>(<span class="hljs-params">derivedCtor: <span class="hljs-built_in">any</span>, baseCtors: <span class="hljs-built_in">any</span>[]</span>) </span>{
    baseCtors.forEach(baseCtor =&gt; {
        <span class="hljs-built_in">Object</span>.getOwnPropertyNames(baseCtor.prototype).forEach(name =&gt; {
            derivedCtor.prototype[name] = baseCtor.prototype[name];
        });
    });
}
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Decorators.html" class="navigation navigation-prev " aria-label="Previous page: Decorators">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="Triple-Slash Directives.html" class="navigation navigation-next " aria-label="Next page: Triple-Slash Directives">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Mixins","level":"1.21","depth":1,"next":{"title":"Triple-Slash Directives","level":"1.22","depth":1,"path":"pages/Triple-Slash Directives.md","ref":"./pages/Triple-Slash Directives.md","articles":[]},"previous":{"title":"Decorators","level":"1.20","depth":1,"path":"pages/Decorators.md","ref":"./pages/Decorators.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"pages/Mixins.md","mtime":"2018-07-01T10:24:27.717Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-07-01T11:21:25.430Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

